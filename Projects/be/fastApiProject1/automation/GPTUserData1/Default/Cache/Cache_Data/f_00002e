(function(a,b,c,d){var e={exports:{}};e.exports;(function(){a.p2sAmp=a.p2sAmp||{};a.p2sq=a.p2sq||[];function p2sSC(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*86400000));var expires="; expires="+date.toGMTString();}else var expires="";document.cookie=name+"="+value+expires+";domain="+(document.domain.substr(0,3)=='www'?document.domain.substr(4):document.domain)+";path=/";if(typeof window.localStorage!=='undefined'){localStorage.setItem(name,value);}}
function jsLoader(plt){if(plt=='fb'){if(typeof(a.fbq)==='undefined'){!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(a,b,'script','https://con'+''+'nect.'+''+'fac'+''+'ebook.net/en_US/fb'+''+'eve'+''+'nts.js');}}else if(plt=='sc'){if(typeof(a.snaptr)==='undefined'){(function(e,t,n){if(e.snaptr)return;var atr=e.snaptr=function(){atr.handleRequest?atr.handleRequest.apply(a,arguments):atr.queue.push(arguments)};atr.queue=[];var s='script';r=t.createElement(s);r.async=!0;r.src=n;var u=t.getElementsByTagName(s)[0];u.parentNode.insertBefore(r,u);})(a,b,'https://sc-s'+''+'tatic.net/sceve'+''+'nt.min.js');}}else if(plt=='tt'){if(window.location.href.search('appspot.com')==-1){if(typeof(a.ttq)==='undefined'){!function(w,d,t){w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i='https://ana'+''+'lytics.ti'+''+'ktok.com/i18n/pix'+''+'el/events.js';ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};}(a,b,'ttq');}}}else if(plt=='pn'){if(typeof(a.pintrk)==='undefined'){!function(e){if(!a.pintrk){a.pintrk=function(){a.pintrk.queue.push(Array.prototype.slice.call(arguments))};var n=a.pintrk;n.queue=[],n.version="3.0";var t=b.createElement("script");t.async=!0,t.src=e;var r=b.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)}}("https://s.pinimg.com/ct/core.js");}}}
function p2sGQ(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);if(results===null){if(typeof window.localStorage!=='undefined'){return localStorage.getItem(name)||'';}
return'';}else{let value=decodeURIComponent(results[1].replace(/\+/g," "))
if(typeof window.localStorage!=='undefined'){localStorage.setItem(name,value);}
return value;}
return'';}
function p2sCCC(t_cc){var cc_val=true;var cc_sub_val=false;var cc_var='';if(t_cc){cc_var=t_cc;if(t_cc.indexOf('.')>0&&t_cc.split('.').length===2){let field_arr=t_cc.split('.');cc_var=field_arr[0];cc_val=p2sGC(cc_var);if(cc_val!==''){cc_sub_val=p2sExtract(cc_val,field_arr[1]);}}else if(t_cc.indexOf('>')>0&&t_cc.split('>').length===2){let field_arr=t_cc.split('>');cc_var=field_arr[0];cc_val=p2sGC(cc_var);if(cc_val!==''){cc_sub_val=cc_val.indexOf(field_arr[1])>-1;}}else{cc_sub_val=cc_val=p2sGC(t_cc);}
if(cc_sub_val&&!p2sIntent(cc_sub_val)){cc_val=false;}}
return cc_sub_val;}
function p2sGC(c_name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==c_name){return unescape(y);}}
if(typeof window.localStorage!=='undefined'){return localStorage.getItem(c_name)||'';}
return'';};function p2sHS(input){input=input+'';var hval=0x811c9dc5;for(var i=0;i<input.length;i++){hval=hval^(input.charCodeAt(i)&0xFF);hval+=(hval<<1)+(hval<<4)+(hval<<7)+(hval<<8)+(hval<<24);}
var val=hval>>>0;return("0000000"+(val>>>0).toString(16)).substr(-8);}
function p2sExtract(str,field){let obj_str=str.toString().trim();let val_obj;if(obj_str.indexOf('{')===0&&obj_str.indexOf('}')===obj_str.length-1){try{val_obj=JSON.parse(obj_str);for(let i in val_obj){if(i===field){return val_obj[i].replace(/['"]+/g,'');}}}catch(e){let obj_arr=decodeURIComponent(obj_str).substring(1,obj_str.length-1).split(',');for(let i in obj_arr){let a_sub_arr=obj_arr[i].split(':');if(a_sub_arr.length===2&&a_sub_arr[0]===field){return a_sub_arr[1].replace(/['"]+/g,'');}}}}
return str;}
function p2sIntent(val){if(typeof(val)=='undefined'||!val||val.toString().length<=0||val==='revoke'||val===''||val==='false'||val==='0'||val==='{}'||val==='[]'||val==='off'){return false;}else{return true;}}
var t_endpoint='push';var t_cc='';var t_currency='USD';var t_token='0f154442a976811930b02da068e193eb337ef0eb9ca1a78c8bec963928fefa0d';var t_domain='https://cpi.askaichat.app';var fb_data={"pixels":["2148105732066107"]};var ttq_data={"pixels":["CKRNUT3C77UAIQIC3630"]};var sc_data={"pixels":[]};var pn_data={"pixels":[]};a.__p2s_fb_pixels=a.__p2s_fb_pixels||[];a.__p2s_tt_pixels=a.__p2s_tt_pixels||[];a.__p2s_sc_pixels=a.__p2s_sc_pixels||[];a.__p2s_pn_pixels=a.__p2s_pn_pixels||[];if(a.__p2s_fb_pixels.length>0||fb_data.pixels.length>0){jsLoader('fb');}
if(a.__p2s_tt_pixels.length>0||ttq_data.pixels.length>0){jsLoader('tt');}
if(a.__p2s_sc_pixels.length>0||sc_data.pixels.length>0){jsLoader('sc');}
if(a.__p2s_sc_pixels.length>0||pn_data.pixels.length>0){jsLoader('pn');}
function p2sParams(plt,p,pmap){var rtn={};for(ptrgt in pmap){let psrc=pmap[ptrgt];if(ptrgt==='contents'&&p.hasOwnProperty('content_ids')&&!p.hasOwnProperty('contents')){if(Array.isArray(p.content_ids)){p.contents=p.content_ids.filter(id=>typeof id==='string'||(typeof id==='number'&&Number.isInteger(id))).map(id=>({id:id,quantity:1}));}}
if(ptrgt==='content_ids'&&p.hasOwnProperty('content_ids')&&p.hasOwnProperty('contents')){delete p.content_ids;}
if(plt=='ttq'&&ptrgt==='contents'&&p.hasOwnProperty('contents')){rtn.contents=[];for(let c in p.contents){if(p.contents[c].hasOwnProperty('id')){let nc={};nc.content_id=p.contents[c].id;rtn.content_id=rtn.content_id||nc.content_id;if(p.contents[c].hasOwnProperty('quantity')){nc.quantity=parseInt(p.contents[c].quantity||1,10);}else{nc.quantity=1;}
if(p.contents[c].hasOwnProperty('item_price')){nc.price=parseFloat(p.contents[c].item_price,10);if(isNaN(nc.price)){nc.price=1;}
rtn.price=rtn.price||nc.price;}else if(p.hasOwnProperty('value')){nc.price=parseFloat(p.value,10);if(isNaN(nc.price)){nc.price=1;}
rtn.price=rtn.price||nc.price;}
if(p.hasOwnProperty('content_type')){nc.content_type=p.content_type;}
if(p.contents[c].hasOwnProperty('product_type')){nc.product_type=p.contents[c].product_type;rtn.product_type=rtn.product_type||nc.product_type;}else if(p.hasOwnProperty('product_type')){nc.product_type=p.product_type;rtn.product_type=rtn.product_type||nc.product_type;}
if(p.contents[c].hasOwnProperty('content_category')){nc.content_category=p.contents[c].content_category;rtn.content_category=rtn.content_category||nc.content_category;}else if(p.hasOwnProperty('content_category')){nc.content_category=p.content_category;rtn.content_category=rtn.content_category||nc.content_category;}
if(p.contents[c].hasOwnProperty('content_name')){nc.content_name=p.contents[c].content_name;rtn.content_name=rtn.content_name||nc.content_name;}else if(p.hasOwnProperty('content_name')){nc.content_name=p.content_name;rtn.content_name=rtn.content_name||nc.content_name;}
rtn.contents.push(nc);}}
if(rtn.contents.length===0){delete rtn.contents;}}else if(plt=='sc'&&ptrgt==='contents'&&p.hasOwnProperty('contents')){rtn.item_ids=[];for(let c in p.contents){if(p.contents[c].hasOwnProperty('id')){rtn.item_ids.push(p.contents[c].id);}}
if(rtn.item_ids.length===0){delete rtn.item_ids;}}else if(plt=='pn'&&ptrgt==='contents'&&p.hasOwnProperty('contents')){rtn.line_items=[];for(let c in p.contents){if(p.contents[c].hasOwnProperty('id')){let nc={};nc.product_id=p.contents[c].id;if(p.contents[c].hasOwnProperty('quantity')){nc.product_quantity=p.contents[c].quantity;}
if(p.contents[c].hasOwnProperty('item_price')){nc.product_price=p.contents[c].item_price;}else if(p.hasOwnProperty('value')){nc.product_price=p.value;}
if(p.hasOwnProperty('content_category')){nc.product_category=p.content_category;}
if(p.hasOwnProperty('content_name')){nc.product_name=p.content_name;}
rtn.line_items.push(nc);}}
if(rtn.line_items.length===0){delete rtn.line_items;}}else if(p.hasOwnProperty(psrc)){rtn[ptrgt]=p[psrc];}else if((typeof(psrc)==='object')){for(psrcsub in psrc){if(p.hasOwnProperty(psrc[psrcsub])){rtn[ptrgt]=rtn[ptrgt]||p[psrc[psrcsub]];}}}}
return rtn;}
var emaps={"ttq":{"pageview":{"name":"Browse","p":{"value":"value","currency":"currency"}},"browse":{"name":"Browse","p":{"value":"value","currency":"currency"}},"clickbutton":{"name":"ClickButton","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id"}},"search":{"name":"Search","p":{"query":"search_string","value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"viewcontent":{"name":"ViewContent","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity"}},"addtocart":{"name":"AddToCart","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity"}},"initiatecheckout":{"name":"InitiateCheckout","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity"}},"purchase":{"name":"CompletePayment","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity"}},"placeanorder":{"name":"PlaceAnOrder","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity"}},"addpaymentinfo":{"name":"AddPaymentInfo","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity"}},"addtowishlist":{"name":"AddToWishlist","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","value":"value","currency":"currency","content_name":"content_name","content_category":"content_category","price":"price","quantity":"quantity"}},"completeregistration":{"name":"CompleteRegistration","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"lead":{"name":"SubmitForm","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"download":{"name":"Download","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"submitform":{"name":"SubmitForm","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"contact":{"name":"Contact","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"subscribe":{"name":"Subscribe","p":{"value":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"init":{"name":"identity","p":{"phone_number":["pp","ph"],"email":"em"}}},"sc":{"pageview":{"name":"PAGE_VIEW","p":{"price":"value","currency":"currency"}},"browse":{"name":"PAGE_VIEW","p":{"price":"value","currency":"currency"}},"clickbutton":{"name":"CUSTOM_EVENT_1","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id"}},"search":{"name":"SEARCH","p":{"query":"search_string","price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"viewcontent":{"name":"VIEW_CONTENT","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"addtocart":{"name":"ADD_CART","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"initiatecheckout":{"name":"START_CHECKOUT","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"purchase":{"name":"PURCHASE","p":{"transaction_id":"order_id","content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"addpaymentinfo":{"name":"ADD_BILLING","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"addtowishlist":{"name":"ADD_TO_WISHLIST","p":{"content_type":"content_type","contents":"contents","content_id":"content_id","price":"value","currency":"currency"}},"completeregistration":{"name":"SIGN_UP","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"lead":{"name":"CUSTOM_EVENT_1","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"contact":{"name":"CUSTOM_EVENT_2","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"subscribe":{"name":"SUBSCRIBE","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"init":{"name":"init","p":{"phone_number":"ph","email":"em"}},"custom_event_1":{"name":"CUSTOM_EVENT_1","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"custom_event_2":{"name":"CUSTOM_EVENT_2","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"custom_event_3":{"name":"CUSTOM_EVENT_3","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"custom_event_4":{"name":"CUSTOM_EVENT_4","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}},"custom_event_5":{"name":"CUSTOM_EVENT_5","p":{"price":"value","currency":"currency","contents":"contents","content_id":"content_id","content_type":"content_type"}}},"pn":{"pageview":{"name":"pageview","p":{"contents":"contents","content_ids":"content_ids","value":"value","currency":"currency"}},"clickbutton":{"name":"clickbutton","p":{"value":"value","currency":"currency"}},"search":{"name":"search","p":{"search_query":"search_string","value":"value","currency":"currency"}},"viewcontent":{"name":"pagevisit","p":{"contents":"contents","content_ids":"content_ids","value":"value","currency":"currency"}},"addtocart":{"name":"addtocart","p":{"contents":"contents","content_ids":"content_ids","value":"value","currency":"currency"}},"initiatecheckout":{"name":"initiatecheckout","p":{"contents":"contents","content_ids":"content_ids","value":"value","currency":"currency"}},"purchase":{"name":"checkout","p":{"order_id":"order_id","contents":"contents","content_ids":"content_ids","value":"value","currency":"currency"}},"addpaymentinfo":{"name":"addpaymentinfo","p":{"content_type":"content_type","contents":"contents","content_ids":"content_ids","content_id":"content_id","price":"value","currency":"currency"}},"addtowishlist":{"name":"addtowishlist","p":{"content_type":"content_type","contents":"contents","content_ids":"content_ids","content_id":"content_id","price":"value","currency":"currency"}},"completeregistration":{"name":"signup","p":{"value":"value","currency":"currency"}},"lead":{"name":"lead","p":{"lead_type":"lead_type","value":"value","currency":"currency"}},"contact":{"name":"contact","p":{"value":"value","currency":"currency"}},"subscribe":{"name":"subscribe","p":{"value":"value","currency":"currency"}},"init":{"name":"init","p":{"ph":"ph","em":"em","ge":"ge","db":"db","fn":"fn","ln":"ln","ct":"ct","st":"st","zp":"zp","country":"cn","external_id":"ext_id"}}}}
function p2sIsNumeric(value){return/^-?\d+$/.test(value);}
function p2sMapCall(plt,et,p,eid){if(Array.isArray(a.__p2s_tt_pixels)&&a.__p2s_tt_pixels.length>0){for(var apx_key in a.__p2s_tt_pixels){if(apx_key>=0&&apx_key<100){if(p2sIsNumeric(a.__p2s_tt_pixels[apx_key])){if(ttq_data.pixels.indexOf(a.__p2s_tt_pixels[apx_key].toString().trim().toLowerCase())===-1){ttq_data.pixels.push(a.__p2s_tt_pixels[apx_key]);}}}}}
if(Array.isArray(a.__p2s_sc_pixels)&&a.__p2s_sc_pixels.length>0){for(var apx_key in a.__p2s_sc_pixels){if(apx_key>=0&&apx_key<100){if(p2sIsNumeric(a.__p2s_sc_pixels[apx_key])){if(sc_data.pixels.indexOf(a.__p2s_sc_pixels[apx_key].toString().trim().toLowerCase())===-1){sc_data.pixels.push(a.__p2s_sc_pixels[apx_key]);}}}}}
if(Array.isArray(a.__p2s_pn_pixels)&&a.__p2s_pn_pixels.length>0){for(var apx_key in a.__p2s_pn_pixels){if(apx_key>=0&&apx_key<100){if(p2sIsNumeric(a.__p2s_pn_pixels[apx_key])){if(pn_data.pixels.indexOf(a.__p2s_pn_pixels[apx_key].toString().trim().toLowerCase())===-1){pn_data.pixels.push(a.__p2s_pn_pixels[apx_key]);}}}}}
var p2s_test_event_code=p2sGC('p2s_test_event_code');if(p2s_test_event_code!=''){console.log(plt,et,p,eid);for(var pi in ttq_data.pixels){if(pi>=0&&pi<100){console.log(pi)}}}
if(plt=='ttq'&&emaps.hasOwnProperty(plt)){if(window.location.href.search('appspot.com')==-1){if(et.toLowerCase()=='pageview'){if(ttq_data.pixels.length>0){for(var pi in ttq_data.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log(ttq_data.pixels[pi]+'.page()');}
try{window.ttq.instance(ttq_data.pixels[pi]);}catch(e){window.ttq.load(ttq_data.pixels[pi]);}finally{window.ttq.instance(ttq_data.pixels[pi]).page({event_id:eid});}}}}}else if(et.toLowerCase()=='init'||et.toLowerCase()=='identify'){if(ttq_data.pixels.length>0&&et.toLowerCase()=='init'){window.ttq._partner="ZZG";for(var pi in ttq_data.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log(ttq_data.pixels[pi]+'.load()');}
window.ttq.load(ttq_data.pixels[pi]);}}}
if(Object.keys(p).length>0){ttq_amp=p2sParams(plt,p,emaps.ttq[et.toLowerCase()]['p']);for(var aky in ttq_amp){if(aky.toString().trim().toLowerCase()==='pixels'){if(Array.isArray(ttq_amp[aky])){for(var apx_key in ttq_amp[aky]){if(apx_key>=0&&apx_key<100){if(ttq_data.pixels.indexOf(ttq_amp[aky][apx_key].toString().trim().toLowerCase())===-1){ttq_data.pixels.push(ttq_amp[aky][apx_key].toString().trim().toLowerCase());a.__p2s_tt_pixels.push(ttq_amp[aky][apx_key].toString().trim().toLowerCase());window.ttq.load(ttq_amp[aky][apx_key].toString().trim().toLowerCase());}}}}}
if(p2sIsSHA256(ttq_amp[aky])&&aky.indexOf('sha256_')!==0){ttq_amp['sha256_'+aky]=ttq_amp[aky];delete ttq_amp[aky];}}
ttq_amp.external_id=eid;if(Object.keys(ttq_amp).length>0){if(ttq_data.pixels.length>0){for(var pi in ttq_data.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log(ttq_data.pixels[pi]+'.identify(');console.log(ttq_amp);console.log(');');}
window.ttq.instance(ttq_data.pixels[pi]).loaded?window.ttq.instance(ttq_data.pixels[pi]).identify(ttq_amp):'';}}}}}}else{if(emaps.ttq.hasOwnProperty(et.toLowerCase())){var prm={};if(emaps.ttq[et.toLowerCase()].hasOwnProperty('p')){prm=p2sParams(plt,p,emaps.ttq[et.toLowerCase()]['p']);}
if(ttq_data.pixels.length>0){for(var pi in ttq_data.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log(ttq_data.pixels[pi]+'.track('+emaps.ttq[et.toLowerCase()].name+',');console.log(prm);console.log({event_id:eid});console.log(');');}
window.ttq.instance(ttq_data.pixels[pi]).track(emaps.ttq[et.toLowerCase()].name,prm,{event_id:eid});}}}}else{try{prm=p2sParams(plt,p,emaps.ttq['pageview']['p']);window.ttq.instance(ttq_data.pixels[pi]).track(et.toLowerCase(),prm,{event_id:eid});}catch(e){console.log(e);}}}}}else if(plt=='sc'&&emaps.hasOwnProperty(plt)){if(et.toLowerCase()=='init'){var sc_amp=p2sParams(plt,p,emaps.sc[et.toLowerCase()]['p']);for(var aky in sc_amp){if(aky.toString().trim().toLowerCase()==='pixels'){if(Array.isArray(sc_amp[aky])){for(var apx_key in sc_amp[aky]){if(apx_key>=0&&apx_key<100){if(sc_data.pixels.indexOf(sc_amp[aky][apx_key].toString().trim().toLowerCase())===-1){sc_data.pixels.push(sc_amp[aky][apx_key].toString().trim().toLowerCase());a.__p2s_sc_pixels.push(sc_amp[aky][apx_key].toString().trim().toLowerCase());}}}}}
if(p2sIsSHA256(sc_amp[aky])&&aky.indexOf('user_hashed_')!==0){sc_amp['user_hashed_'+aky]=sc_amp[aky];delete sc_amp[aky];}}
if(sc_data.pixels.length>0){for(var pi in sc_data.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log("snaptr('init','"+sc_data.pixels[pi]+",");console.log(sc_amp);console.log(');');}
a.snaptr('init',sc_data.pixels[pi],sc_amp);}}}}else{if(emaps.sc.hasOwnProperty(et.toLowerCase())){var prm={};if(emaps.sc[et.toLowerCase()].hasOwnProperty('p')){prm=p2sParams(plt,p,emaps.sc[et.toLowerCase()]['p']);}
prm.client_dedup_id=eid;if(et.toLowerCase()=='purchase'&&!prm.hasOwnProperty('transaction_id')){prm.transaction_id=eid;}
if(sc_data.pixels.length>0){if(p2s_test_event_code!=''){console.log('snaptr("track","'+emaps.sc[et.toLowerCase()].name+'",');console.log(prm);console.log(');');}
a.snaptr('track',emaps.sc[et.toLowerCase()].name,prm);}}}}else if(plt=='pn'&&emaps.hasOwnProperty(plt)){if(et.toLowerCase()=='pageview'){if(pn_data.pixels.length>0){for(var pi in pn_data.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log(pn_data.pixels[pi]+'.page()');}
a.pintrk('page');}}}}else if(et.toLowerCase()=='init'||et.toLowerCase()=='identify'){pn_amp={};pn_amp.external_id=eid;if(Object.keys(p).length>0){pn_amp=p2sParams(plt,p,emaps.pn[et.toLowerCase()]['p']);}
if(pn_data.pixels.length>0&&et.toLowerCase()=='init'){for(var pi in pn_data.pixels){if(pi>=0&&pi<100){if(p2s_test_event_code!=''){console.log('window.pintrk.("load",');console.log(pn_data.pixels[pi]);console.log(pn_amp);console.log(')');}
a.pintrk('load',pn_data.pixels[pi],pn_amp);}}}
if(Object.keys(p).length>0){pn_amp=p2sParams(plt,p,emaps.pn[et.toLowerCase()]['p']);for(var aky in pn_amp){if(aky.toString().trim().toLowerCase()==='pixels'){if(Array.isArray(pn_amp[aky])){for(var apx_key in pn_amp[aky]){if(apx_key>=0&&apx_key<100){if(pn_data.pixels.indexOf(pn_amp[aky][apx_key].toString().trim().toLowerCase())===-1){pn_data.pixels.push(pn_amp[aky][apx_key].toString().trim().toLowerCase());a.__p2s_pn_pixels.push(pn_amp[aky][apx_key].toString().trim().toLowerCase());a.pintrk('load',pn_amp[aky][apx_key].toString().trim().toLowerCase(),pn_amp);}}}}}}}}else{if(emaps.pn.hasOwnProperty(et.toLowerCase())){var prm={};if(emaps.pn[et.toLowerCase()].hasOwnProperty('p')){prm=p2sParams(plt,p,emaps.pn[et.toLowerCase()]['p']);}
prm.event_id=eid;if(pn_data.pixels.length>0){if(p2s_test_event_code!=''){console.log("a.pintrk('track',"+emaps.pn[et.toLowerCase()].name+',');console.log(prm);console.log(');');}
a.pintrk('track',emaps.pn[et.toLowerCase()].name,prm);}}}}}
function p2sIsSHA256(str){const regexExp=/^[a-f0-9]{64}$/gi;return regexExp.test(str);}
function p2sc(et,p,eid){p=p||false;eid=eid||false;if(Array.isArray(a.__p2s_fb_pixels)&&a.__p2s_fb_pixels.length>0){for(var apx_key in a.__p2s_fb_pixels){if(apx_key>=0&&apx_key<100){if(p2sIsNumeric(a.__p2s_fb_pixels[apx_key])){if(fb_data.pixels.indexOf(a.__p2s_fb_pixels[apx_key].toString().trim().toLowerCase())===-1){fb_data.pixels.push(a.__p2s_fb_pixels[apx_key]);}}}}}
if(!et){console.log('et not found',et);return false;}
var std=true;var tcmd='trackSingle';if(et.toString().trim().substring(0,7).toLowerCase()=='custom:'){tcmd='trackSingleCustom';et=et.toString().trim().substring(7);std=false;}
if(t_endpoint){sst=true;}else{sst=false;}
if(et.toString().trim().substring(0,6).toLowerCase()=='pixel:'){et=et.toString().trim().substring(6);sst=false;}
var p2s_test_event_code=p2sGC('p2s_test_event_code');if(p2s_test_event_code!=''){console.log(et,p,eid);}
if(et=='cc'&&t_cc){p2sSC(t_cc,p,365);return;}
if(et.toLowerCase()=='consent'&&(p.toString().toLowerCase()==='revoke'||p.toString().toLowerCase()==='grant')){if(fb_data.pixels.length>0&&typeof(fbq)!='undefined'){fbq('consent',p.toString().toLowerCase());}
p2sSC('_p2s_cc',p.toString().toLowerCase(),365);return;}
var amp_cc=true;var p2s_cc_val=p2sGC('_p2s_cc');if(t_cc){var cc_val;if(t_cc.indexOf('.')>0){let field_arr=t_cc.split('.');if(field_arr.length===2){cc_val=p2sGC(field_arr[0]);cc_val=p2sExtract(cc_val,field_arr[1]);}else{cc_val=p2sGC(t_cc);}}else if(t_cc.indexOf('>')>0){let field_arr=t_cc.split('>');if(field_arr.length===2){cc_val=p2sGC(field_arr[0]);cc_val=cc_val.indexOf(field_arr[1])>-1;}else{cc_val=p2sGC(t_cc);}}else{cc_val=p2sGC(t_cc);}
if(!p2sIntent(cc_val)){amp_cc=false;if(p2s_cc_val!=='autorevoke'){if(fb_data.pixels.length>0&&typeof(fbq)!='undefined'){fbq('consent','revoke');}
p2sSC('_p2s_cc','autorevoke',365);}}else{if(p2s_cc_val==='autorevoke'){if(fb_data.pixels.length>0&&typeof(fbq)!='undefined'){fbq('consent','grant');}
p2sSC('_p2s_cc','grant',365);}}}else{if(p2s_cc_val==='autorevoke'){p2s_cc_val='';}}
if(amp_cc){if(p2s_cc_val==='autorevoke'||p2s_cc_val==='revoke'){amp_cc=false;}}
if(et.toLowerCase()=='dataprocessingoptions'){window.__fbq_dpo=[typeof(p[0])!='undefined'?p[0]:[],typeof(p[1])!='undefined'?p[1]:[],typeof(p[2])!='undefined'?p[2]:[]];if(fb_data.pixels.length>0&&typeof(fbq)!='undefined'){fbq('dataProcessingOptions',window.__fbq_dpo[0],window.__fbq_dpo[1],window.__fbq_dpo[2]);}
return;}
var uvi=p2sGC('_p2s_uvi');if(!uvi){euid=p2sGC('_fbp')||p2sGC('_ttp')||p2sGC('_scid')||p2sGC('uvi')||p2sGC('_ga')||p2sGC('_gid')||p2sGC('PHPSESSID')||p2sGC('ASP.NET_SessionId')||p2sHS(navigator.userAgent)+'.'+p2sHS(location.href);uvi=p2sHS(euid)+'.'+Math.floor(Math.random()*10000000000000001)+"."+Date.now();p2sSC('_p2s_uvi',uvi,365);}
if(et.toLowerCase()=='init'||et.toLowerCase()=='identify'){window.p2sAmp=window.p2sAmp||{};if(p){for(pidt in p){window.p2sAmp[pidt]=p[pidt];}}
var amp_key_match={'ph':'ph','em':'em','fn':'fn','ln':'ln','fid':'fb_login_id','fb_login_id':'fb_login_id','cn':'country','country':'country','ct':'ct','st':'st','db':'db','ge':'ge','external_id':'external_id','pp':'pp'};var amp_for_pixel={};if(amp_cc){for(var amp_key in window.p2sAmp){if(amp_key.toString().trim().toLowerCase()==='pixels'){if(Array.isArray(window.p2sAmp[amp_key])){for(var apx_key in window.p2sAmp[amp_key]){if(p2sIsNumeric(window.p2sAmp[amp_key][apx_key])){if(fb_data.pixels.indexOf(window.p2sAmp[amp_key][apx_key].toString().trim().toLowerCase())===-1){fb_data.pixels.push(window.p2sAmp[amp_key][apx_key].toString().trim().toLowerCase());a.__p2s_fb_pixels.push(window.p2sAmp[amp_key][apx_key].toString().trim().toLowerCase());}}}}}else if(amp_key.toString().trim().toLowerCase()==='catcher'){if(Array.isArray(window.p2sAmp[amp_key])){if(window.p2sAmp[amp_key].indexOf('gecl')>-1){let geQStr=p2sGQ('gclid');if(!p2sGC('_p2s_gcl')||geQStr!==''){gclid_params=[geQStr,p2sGC('_gcl_aw'),p2sGC('_gcl_dc')];gclid=false;for(gcii in gclid_params){gcldm=decodeURIComponent(gclid_params[gcii]).match(/(Cj[0-9A-Za-z_-]+)/);if(gcldm){gclid=gcldm[0];break;}}
if(gclid){p2sSC('_p2s_gcl',gclid,30);}}}else if(window.p2sAmp[amp_key].indexOf('fbcl')>-1){if(!p2sGC('_fbc')){var fbclid=p2sGQ('fbclid');if(fbclid){var fbcValue='fb.1'+'.'+Date.now()+'.'+fbclid;p2sSC('_fbc',fbcValue,30);}}}else if(window.p2sAmp[amp_key].indexOf('ttcl')>-1){if(!p2sGC('ttclid')){var ttclid=p2sGQ('ttclid');if(ttclid){p2sSC('ttclid',ttclid,30);}}}}}else if(amp_key_match.hasOwnProperty(amp_key)){if(window.p2sAmp[amp_key]!=='eb045d78d273107348b0300c01d29b7552d622abbc6faf81b3ec55359aa9950c'){if((amp_key==='external_id')&&!window.p2sAmp[amp_key]){window.p2sAmp[amp_key]=uvi;}
amp_for_pixel[amp_key_match[amp_key]]=window.p2sAmp[amp_key];}}}
if(typeof window.p2sAmp['external_id']=="undefined"){window.p2sAmp['external_id']=uvi;}}
if(fb_data.pixels.length>0&&typeof(fbq)!='undefined'){if(et.toLowerCase()=='init'){if(!amp_cc){fbq('consent','revoke');}
fbq.disablePushState=true;}
for(var pi in fb_data.pixels){if(pi>=0&&pi<100){fbq('init',fb_data.pixels[pi],amp_for_pixel);}}}
if(ttq_data.pixels.length>0&&typeof(window.ttq)!='undefined'&&window.ttq){p2sMapCall('ttq',et,amp_for_pixel,uvi);}
if(sc_data.pixels.length>0){p2sMapCall('sc',et,amp_for_pixel,uvi);}
if(pn_data.pixels.length>0){p2sMapCall('pn',et,amp_for_pixel,uvi);}
return;}
if(et=='test'){p2sSC('p2s_test_event_code',p.test_event_code);p2sSC('pixel_debug',true);return;}
if(!p){p={value:0,currency:p2sGC('currency')||t_currency};}
var amp=a.p2sAmp||{};if(et==='setTrigger'){if(window.dataLayer){var isConditionMet=false;function checkConditions(){if(p2s_test_event_code){console.log('checkConditions');}
if(p.variable){try{if(eval(p.variable)){isConditionMet=true;return true;}}catch(e){console.warn("Error accessing variable:",p.variable,e);}}
if(p.localStorageVar){try{if(localStorage.getItem(p.localStorageVar)){isConditionMet=true;return true;}}catch(e){console.warn("Error accessing LocalStorage variable:",p.localStorageVar,e);}}
if(p.cookieVar){try{if(p2sGC(p.cookieVar)){isConditionMet=true;return true;}}catch(e){console.warn("Error accessing cookie variable:",p.cookieVar,e);}}
if(p.type=='onAmpReady'&&p.fields){for(var fld in p.fields){if(amp.hasOwnProperty(p.fields[fld])){isConditionMet=true;return true;}}}
return false;}
function pushEventAndClearTimers(){dataLayer.push({'event':p.callback});clearInterval(checkInterval);clearTimeout(failSafeTimer);if(p2s_test_event_code){console.log('pushEventAndClearTimers:',p.callback);}}
if(checkConditions()){pushEventAndClearTimers();return;}
var checkInterval=setInterval(function(){if(checkConditions()){pushEventAndClearTimers();}},p.interval||500);var failSafeTimer=setTimeout(function(){if(!isConditionMet){pushEventAndClearTimers();}},p.timeout||10000);}
return;}
if(p2s_test_event_code!=''){p.test_event_code=p2s_test_event_code;}
if(typeof(window.__fbq_dpo)!='undefined'){p.dpo=window.__fbq_dpo;}
if(!eid){eid=Date.now()+"-"+uvi+"-"+Math.round((Math.random()*1000000),0);}
if(fb_data.pixels.length>0&&typeof(fbq)!='undefined'){for(var pi in fb_data.pixels){if(pi>=0&&pi<100){fbq(tcmd,fb_data.pixels[pi],et,p,{eventID:eid});}}}
if(amp_cc){amp.fbp=p2sGC('_fbp');amp.fbc=p2sGC('_fbc');}else{sst=false;}
p.url=window.location.href;p.url=p.url.split("?")[0].split("#")[0];if(sst){if(amp_cc){var _ttp=p2sGC('_ttp');if(_ttp){p.ttp=_ttp;}
var _scid=p2sGC('_scid');if(_scid){p.uuid_c1=_scid;}
var _ttc=p2sGC('ttclid');if(_ttc){p.ttc=_ttc;}
var _epik=p2sGC('_epik');if(_epik){p._epik=_epik;}
var _p2s_gcl=p2sGC('_p2s_gcl');if(_p2s_gcl){p.gclid=_p2s_gcl;}}
if(typeof(amp.catcher)!='undefined'){delete amp.catcher;}
if(typeof(amp.pixels)!='undefined'){delete amp.pixels;}
var request=false;if(window.XMLHttpRequest){request=new XMLHttpRequest();}else if(window.ActiveXObject){request=new ActiveXObject('Microsoft.XMLHTTP');}
if(p2s_test_event_code!=''){console.log(p);console.log(amp);}
if(request){request.open('POST',t_domain+"/"+t_endpoint+"/?woc=true&v=3."+Math.random(10000000),true);request.onreadystatechange=function(){if(request.readyState==4&&request.status==200){if(p2s_test_event_code!=''){console.log(request.responseText);}}}
request.setRequestHeader("Content-type","application/x-www-form-urlencoded");request.send("eid="+encodeURIComponent(eid)+"&et="+encodeURIComponent(et)+"&p="+encodeURIComponent(JSON.stringify(p))+"&amp="+encodeURIComponent(JSON.stringify(amp))+"&std="+(std?'1':0)+"&cc="+(amp_cc?'1':'0')+"&token="+encodeURIComponent(t_token));}}
if(amp_cc&&ttq_data.pixels.length>0&&typeof(window.ttq)!='undefined'&&window.ttq){p2sMapCall('ttq',et,p,eid);}
if(amp_cc&&sc_data.pixels.length>0&&typeof(a.snaptr)!='undefined'&&a.snaptr){p2sMapCall('sc',et,p,eid);}
if(amp_cc&&pn_data.pixels.length>0&&typeof(a.pintrk)!='undefined'&&a.pintrk){p2sMapCall('pn',et,p,eid);}
window._last_et=et;window._last_p=p;}
if((p2sq.status||'uninitialized')!='initialized'){if(p2sq.length>0){for(p2id in p2sq){if(p2sq[p2id].et||false){if(p2sq[p2id].et.toLowerCase()=='init'){var fso=p2sq.splice(p2id,1)[0];p2sc(fso.et,fso.p,fso.eid||false);}}}}
a.p2sq_history=a.p2sq_history||[];if(typeof(window.p2sq_track_consent)!='undefined'&&window.p2sq_track_consent&&t_cc&&!p2sCCC(t_cc)){a.p2sq_history=p2sq.slice();var checkCount=0;var checkCCInterval=setInterval(function(){checkCount++;if(p2sCCC(t_cc)||checkCount>=20){clearInterval(checkCCInterval);while(a.p2sq_history.length){var fso=a.p2sq_history.pop();if(fso.et||false){p2sc(fso.et,fso.p,fso.eid||false);}}}},3000);}
while(p2sq.length){var fso=p2sq.pop();if(fso.et||false){p2sc(fso.et,fso.p,fso.eid||false);}}
a.p2sq={'push':function(o){if(typeof(window.p2sq_track_consent)!='undefined'&&window.p2sq_track_consent&&t_cc&&!p2sCCC(t_cc)){a.p2sq_history.push(o);}
p2sc(o.et,o.p,o.eid||false);},'status':'initialized'}}})()})(window,document,location,history);